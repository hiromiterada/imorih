= provide :title, t('views.search_payment')

.panel.panel-default
  .panel-heading
    %h3.panel-title= t('.panel_title')
  .panel-body
    - @contracts.each_with_index do |contract, i|
      %fieldset
        %legend= [Contract.model_name.human, i+1].join
      %dl.dl-horizontal
        %dt= Contract.human_attribute_name(:number)
        %dd= [contract.number, '(', contract.enum_i18n(:kind), ')'].join
        %dt= Contract.human_attribute_name(:rent)
        %dd= contract.rent
        %dt= Contract.human_attribute_name(:period)
        %dd= contract.period

%h2= t('views.search_payment')

%p= page_entries_info @payments

%table.table.table-striped
  %thead
    %tr
      %th= Contract.human_attribute_name(:number)
      %th= Payment.human_attribute_name(:payday)
      %th= Payment.human_attribute_name(:amount)
      %th= Contract.human_attribute_name(:kind)
      %th= Payment.human_attribute_name(:period)
      %th= Payment.human_attribute_name(:message)
      %th= Payment.human_attribute_name(:note)

  %tbody
    - @payments.each do |payment|
      %tr
        %td= payment.contract.try(:number)
        %td= payment.payday
        %td= payment.amount
        %td= payment.contract.enum_i18n(:kind) if payment.contract.present?
        %td= payment.period
        %td= payment.message
        %td= payment.note

%br

= paginate @payments
